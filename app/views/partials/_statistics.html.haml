.govuk-grid-row
  .govuk-grid-column-full
    %table.govuk-table
      %thead.govuk-table__head
        %tr.govuk-table__row
          %th{class: "govuk-table__header", scope: "col"} Unit Type
          %th{class: "govuk-table__header", scope: "col"} Market Units
          %th{class: "govuk-table__header", scope: "col"} Social Rented Units
          %th{class: "govuk-table__header", scope: "col"} Intermediate Units
          %th{class: "govuk-table__header", scope: "col"} Total Units
      - (1..@dwellings_statistics.max_bedrooms).each do |bedroom_count|
        %tbody.govuk-table__body
          %tr.govuk-table__row
            %th.govuk-table__header{scope: "row"}= pluralize(bedroom_count, 'Bedroom')
            %td.govuk-table__cell= @dwellings_statistics.unit_count(tenure: 'open', bedrooms: bedroom_count)
            %td.govuk-table__cell= @dwellings_statistics.unit_count(tenure: 'social', bedrooms: bedroom_count)
            %td.govuk-table__cell= @dwellings_statistics.unit_count(tenure: 'intermediate', bedrooms: bedroom_count)
            %td.govuk-table__cell= @dwellings_statistics.unit_count(bedrooms: bedroom_count)
      %tbody.govuk-table__body
        %tr.govuk-table__row
          %th.govuk-table__header{scope: "row"} Total
          %td.govuk-table__cell= @dwellings_statistics.unit_count(tenure: 'open')
          %td.govuk-table__cell= @dwellings_statistics.unit_count(tenure: 'social')
          %td.govuk-table__cell= @dwellings_statistics.unit_count(tenure: 'intermediate')
          %td.govuk-table__cell= @dwellings_statistics.unit_count

  .govuk-grid-column-two-thirds
    .chart-wrapper{class: 'govuk-!-margin-top-9'}
      %canvas#habitableRoomsChart
      :javascript
        var tenuresStats = [
          #{@dwellings_statistics.habitable_room_count(tenure: 'open')},
          #{@dwellings_statistics.habitable_room_count(tenure: 'intermediate')},
          #{@dwellings_statistics.habitable_room_count(tenure: 'social')}
        ]
        var chart1 = document.getElementById('habitableRoomsChart');
        var habitableRoomsChart = new Chart(chart1, {
          type: 'horizontalBar',
          data: {
            labels: ['Market', 'Intermediate', 'Social'],
            datasets: [{
              label: 'Number of habitable rooms',
              data: tenuresStats,
              backgroundColor: [
                'rgba(37, 111, 138, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 206, 86, 0.7)'
              ],
              borderColor: [
                'rgba(37, 111, 138, 0.9)',
                'rgba(54, 162, 235, 0.9)',
                'rgba(255, 206, 86, 0.9)'
              ],
              borderWidth: 0
            }]
          },
          options: {
            title: {
              display: true,
              position: 'top',
              text: 'Number of habitable rooms by tenure',
              fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
              fontColor: '#0b0c0c',
              fontSize: 19,
              fontStyle: 'bold'
            },
            legend: {
              display: false,
            },
            responsive: true,
            maintainAspectRatio: false,
            aspectRatio: 3,
            scales: {
              xAxes: [{
                ticks: {
                  beginAtZero: true,
                  maxTicksLimit: 15
                },
                scaleLabel: {
                  display: true,
                  fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
                  fontColor: '#0b0c0c',
                  fontSize: 14,
                  fontStyle: 'bold',
                  labelString: 'Number of habitable rooms'
                }
              }],
              yAxes: [{
                scaleLabel: {
                  display: true,
                  fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
                  fontColor: '#0b0c0c',
                  fontSize: 14,
                  fontStyle: 'bold',
                  labelString: 'Tenure'
                },
                // stacked: true
              }]
            }
          }
        });

  .govuk-grid-column-one-third
    .chart-wrapper{class: 'govuk-!-margin-top-9'}
      %canvas#affordableHomesPie
    :javascript
      var affordable = #{@dwellings_statistics.affordable_habitable_rooms_percentage}
      var other = #{@dwellings_statistics.open_habitable_rooms_percentage}
      var chart2 = document.getElementById('affordableHomesPie');
      var affordableHomesPie = new Chart(chart2, {
        type: 'pie',
        data: {
        datasets: [{
          data: [affordable, other],
          backgroundColor: [
            'rgba(37, 111, 138, 0.8)',
            'rgba(37, 111, 138, 0.2)'
          ],
          hoverBorderWidth: 0
        }],
        // These labels appear in the legend and in the tooltips when hovering different arcs
        labels: [
          'Affordable',
          'Market'
        ]},
        options: {
          cutoutPercentage: 0,
          title: {
            display: true,
            position: 'top',
            text: '% affordable habitable rooms',
            fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
            fontColor: '#0b0c0c',
            fontSize: 19,
            fontStyle: 'bold'
          },
          legend: {
            position: 'bottom',
            fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
            fontColor: '#0b0c0c',
          }
        }
      });

  .govuk-grid-column-two-thirds
    .chart-wrapper{class: 'govuk-!-margin-top-9'}
      %canvas#totalUnitsChart
      :javascript
        var unitsStats = [
          #{@dwellings_statistics.unit_count(tenure: 'open')},
          #{@dwellings_statistics.unit_count(tenure: 'intermediate')},
          #{@dwellings_statistics.unit_count(tenure: 'social')}
        ]
        var chart1 = document.getElementById('totalUnitsChart');
        var totalUnitsChart = new Chart(chart1, {
          type: 'horizontalBar',
          data: {
            labels: ['Market', 'Intermediate', 'Social'],
            datasets: [{
              label: 'Number of units',
              data: unitsStats,
              backgroundColor: [
                'rgba(37, 111, 138, 0.7)',
                'rgba(54, 162, 235, 0.7)',
                'rgba(255, 206, 86, 0.7)'
              ],
              borderColor: [
                'rgba(37, 111, 138, 0.9)',
                'rgba(54, 162, 235, 0.9)',
                'rgba(255, 206, 86, 0.9)'
              ],
              borderWidth: 0
            }]
          },
          options: {
            title: {
              display: true,
              position: 'top',
              text: 'Number of units by tenure',
              fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
              fontColor: '#0b0c0c',
              fontSize: 19,
              fontStyle: 'bold'
            },
            legend: {
              display: false,
            },
            responsive: true,
            maintainAspectRatio: false,
            aspectRatio: 3,
            scales: {
              xAxes: [{
                ticks: {
                  beginAtZero: true,
                  maxTicksLimit: 15
                },
                scaleLabel: {
                  display: true,
                  fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
                  fontColor: '#0b0c0c',
                  fontSize: 14,
                  fontStyle: 'bold',
                  labelString: 'Number of units'
                }
              }],
              yAxes: [{
                scaleLabel: {
                  display: true,
                  fontFamily: "'myriad-pro', 'HelveticaNeue', 'Helvetica Neue', 'Arial', 'Helvetica', sans-serif",
                  fontColor: '#0b0c0c',
                  fontSize: 14,
                  fontStyle: 'bold',
                  labelString: 'Tenure'
                },
                // stacked: true
              }]
            }
          }
        });
